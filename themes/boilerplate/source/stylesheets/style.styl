// edit()

@import '_settings'
@import '_category'

// establish-baseline('normalize')
normalize()
base()
// typography()
forms()
buttons()
// tables()

// debug()

*, *:after, *:before
  box-sizing: border-box

// random vars
// **TODO**
header-height = 5rem
small-header-height = header-height/1.5
header-background-color = color1
content-bg-color = white - 6%

// layout

html
  gradient: white - 11% white - 17%
  background-attachment: fixed

body
  +from(4)
    center: desktop-cutoff

[role="main"]
  background: content-bg-color
  group()

  .featured
    center(desktop-cutoff, false)
    background-color: white
    padding: 0 1rem

  article.content
    padding: 0 1rem 2rem
    +from(3)
      column(4/5, offset: 1/10)
    +desktop()
      column(2/3, offset: 1/6)

// main header & nav styles

header.main
  background-color: header-background-color
  -webkit-tap-highlight-color: rgba(0,0,0,0)
  line-height: 150%
  padding: 0
  min-height: 3rem
  +from(mobile-cutoff)
    padding: .6rem 0 .8rem
  +desktop()
    padding: 1rem 0 1.2rem
  div
    center(desktop-cutoff, padding: false)
  h1
    margin 0 0 0 1rem
    display inline-block
    +from(mobile-cutoff)
      display block
      margin 0
      text-align center
    a
      color: tint(header-background-color, 80%)
      font-weight 700
      font-size 1.4rem
      background none
      border-bottom none
      +from(mobile-cutoff)
        font-size 1.8rem
      +desktop()
        font-size 2rem
        text-align center
      &:hover
        transition: all 200ms ease-in-out
        color: shade(header-background-color, 50%)
  // **TODO** change this class in the nav js
  .js-nav-active &
    position: fixed
    width: 100%
    z-index: 3

nav.main-menu
  // **TODO** change this class in nav js
  .js &
    clip: rect(0 0 0 0)
    max-height: 0
    position: absolute
    display: block
    overflow: hidden
    zoom: 1
    position: relative
    width: 100%
    margin 0
    margin-top: 1.25rem
  +from(mobile-cutoff)
    margin-top 0 !important
    float: none
    width: auto
    &.closed
      max-height: none
  &.opened
    max-height: 9999px
  ul
    line-height: 1.5rem
    width: 100%
    text-align: center
    inline-list()
    margin-left: 0
    margin-bottom: 0
    +from(mobile-cutoff)
      border-top: none
      line-height: 1rem
    li
      float: none
      width: 100%
      display: block
      padding: .75rem 0
      margin-top: 0
      background: shade(header-background-color, 10%)
      border-bottom: 1px solid shade(header-background-color, 30%)
      &:hover, &.active, .active &
        color: tint(header-background-color, 50%)
        background: tint(header-background-color, 8%)
        transition: all 250ms ease-in-out
      +from(mobile-cutoff)
        display: inline-block
        width: auto
        background: none
        border-bottom: none
        &:hover
          border-bottom: none
          background: none
  a
    // padding: .75rem
    -webkit-tap-highlight-color: rgba(0,0,0,0)
    text-decoration: none
    font-weight: 400
    font-size: 1.125rem
    color: tint(header-background-color, 50%)
    min-width: 100%
    text-align: center
    border-bottom: none
    &.active, .active &
      color: shade(header-background-color, 50%)
      transition: all 250ms ease-in-out
    +from(mobile-cutoff)
      color: shade(header-background-color, 50%)
      vertical-align: middle
      &.active, .active &, &:hover
        border-bottom: none
        color: tint(header-background-color, 70%)
        transition()
        background: none

// **TODO** replace with icon and fade out opacity on open
.nav-toggle
  -webkit-tap-highlight-color: rgba(0,0,0,0)
  -webkit-touch-callout: none
  user-select: none
  text-indent: -20rem
  position: absolute
  top: .7rem
  right: .5rem
  overflow: hidden
  width: 3.7rem
  float: right
  border-bottom: none
  font-size: 1.9rem
  &:hover
    border-bottom: none
    opacity: .8
  +from(mobile-cutoff)
    display: none
  &:before
    color: tint(header-background-color, 70%)
    font-family: "responsivenav"
    text-transform: none
    text-align: center
    content: "\2261"
    text-indent: 0
    speak: none
    position: absolute
    right: .5rem
    top: 0
  &.active:before
    font-size: 24px
    content: "\78"

.disable-pointer-events
  pointer-events: none !important

.mask
  transition: all 300ms ease-in-out
  background: rgba(0,0,0, .5)
  visibility: hidden
  position: absolute
  opacity: 0
  z-index: 2
  bottom: 0
  right: 0
  left: 0
  top: 0
  .android &
    -webkit-transition: none
    transition: none
  .js-nav-active &
    visibility: visible
    opacity: 1
  +from(mobile-cutoff)
    display: none !important
    opacity: 0 !important

@font-face
  font-family: "responsivenav"
  src: url("../../fonts/responsivenav.eot")
  src: url("../../fonts/responsivenav.eot?#iefix") format("embedded-opentype"), url("../../fonts/responsivenav.ttf") format("truetype"), url("../../fonts/responsivenav.woff") format("woff"), url("../../fonts/responsivenav.svg#responsivenav") format("svg")
  font-weight: normal
  font-style: normal

h1.headline
  margin-bottom: 0
  text-align: center

h2.subheading
  margin-top: .75rem
  margin-bottom: .5rem
  text-align: center
  font-weight: normal  
  line-height 1.3
  font-size: 1.2rem
  +from(3)
    font-size 1.5rem

button.action
  button(olive, 21)
  transition()
  center: desktop-cutoff
  margin-bottom: 1.5rem
  padding: 1rem
  font-weight: 700 

flex-video-container()
  position: relative
  padding-top: 1.5rem
  padding-bottom: 56.34%
  height: 0
  margin: 1rem auto 1.5rem auto
  overflow: hidden
  +from(4)
    center: (desktop-cutoff * .75)
    padding-bottom: @padding-bottom * .75
  iframe, object, embed, video
    absolute: top left
    size: 100% 100%

.video
  flex-video-container()

.social
  inline-list()
  li
    margin: .2rem
  a
    button(silver)

//
// Footer
//

footer.footer
  padding: .25rem 1rem 1rem
  background-color: black + 15%
  +from(mobile-cutoff)
    padding: .5rem 2rem
  nav
    center: desktop-cutoff
    group()
    margin-top: 1rem
  a
    text-decoration: none
  p
    color: white - 30%
    text-align: center
    display: block
    margin: 0
    +from(mobile-cutoff)
      margin-bottom: 1rem
      text-align: left
      display: inline-block
      float: left
  ul
    text-align: center
    list-style: none
    margin: 0
    li
      margin: 0 .5rem
      display: inline-block
      +from(mobile-cutoff)
        margin: 0 1rem
        border: none
        padding: 0
      a
        color: white - 30%
        transition: all 250ms ease-in-out
    +from(mobile-cutoff)
      float: right
      display: inline-block
      text-align: left



//
// Typography
//

h1
  h1: 2.2
  line-height: 1.1
  margin-bottom: .75rem
  +tablet()
    h1: 3.1
    line-height: 1.1
    margin-bottom: .85rem
  +desktop()
    h1: 4
    line-height: 1.1
    margin-bottom: 1rem
h2
  h2: 1.7
  line-height: 1.3
  margin-bottom: 0
  margin-top: .8rem
  +tablet()
    h2: 2.2
    line-height: 1.2
    margin-bottom: 0
    margin-top: .9rem
  +desktop()
    h2: 2.5
    line-height: 1.2
    margin-bottom: 0
    margin-top: 1rem
h3
  h3: 1.6
  line-height: 1.1
  font-weight: normal
  margin: 1rem 0 0
  +tablet()
    h3: 1.8
    line-height: 1.1
    font-weight: normal
    margin: .9rem 0 0
  +desktop()
    h3: 2
    line-height: 1.1
    font-weight: normal
    margin: 1rem 0 0
h4
  h4: 1.3
  margin: 0
  font-weight: normal
  +tablet()
    h4: 1.8
    margin: 0
    font-weight: normal
  +desktop()
    h4: 2
    margin: 0
    font-weight: normal
h5
  h5: 1
  margin: 0
  font-weight: normal
  +tablet()
    h5: 1.1
    margin: 0
    font-weight: normal
  +desktop()
    h5: 1.3
    margin: 0
    font-weight: normal
h6
  h6: 0.9
  margin: 0

bold-italic()
hyphenation()
text-selection()

p
  paragraph()
  line-height 1.8

small
  small-text()

a
  link()

blockquote
  blockquo(olive)
  a
    link(olive)

ul
  margin: 0.5rem 0.94rem
  padding-left: .25rem
  li
    list-style-type: disc
    padding: 0.125rem
    line-height 1.6

ol
  margin: 0.32rem 0 .5rem 0.5rem
  padding-left: 1rem
  li
    list-style-type: decimal
    padding: 0.125rem
    line-height 1.6

blockquote
  background-color: content-bg-color - 4%
  p
    margin-bottom 0
    padding: 1rem .75rem 1rem 0

pre > code
  color: black + 25%
  display: block
  padding: .75rem
  background-color: content-bg-color - 5%
  border: 1px solid black + 75%
  border-radius: 3px
  white-space: pre-wrap
  word-break: break-all
  font-family: Menlo, Monaco, monospace
  font-size: .95rem
  line-height: 160%
  +from(mobile-cutoff)
    font-size: 1rem
    padding: 1rem
code
  code()

//
// misc
//

img
  max-width: 100%
  height: auto
  -ms-interpolation-mode: bicubic
  display: inline-block
  vertical-align: middle
  margin-top: .5rem

html
  word-wrap: break-word


// Useful HTML classes
.hide
  display: none !important
.note
  area(yellow+80%)
  p
    margin 0